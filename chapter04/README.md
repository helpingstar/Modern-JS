# Chapter04 변수

메모리 : 데이터를 저장할 수 있는 메모리 셀의 집합체

```js
10 + 20
```

1. 10, 20은 메모리의 임의의 위치(메모리 주소)에 저장
2. CPU는 이 값을 읽어 연산 수행
3. 생성된 숫자 30도 메모리 상의 임의의 위치에 저장

자바스크립트는 개발자의 직접적인 메모리 제어를 허용하지 않는다.

**변수** : 하나의 값을 저장하기 위해 확보한 메모리 공간 자체 또는 그 메모리 공간을 식별하기 위해 붙인 이름

```js
// 04-03
var result = 10 + 20;
```

1. 10 + 20의 연산을 통해 30 생성
2. 30을 메모리 공간에 저장
3. 저장된 메모리 공간에 상직적 이름을 붙인 것이 변수

* **변수 이름** : 메모리 공간에 저장된 값을 식별할 수 있는 고유한 이름
* **변수 값** : 변수에 저장된 값
* **할당(대입, 저장)** : 변수에 값을 저장하는 것
* **참조** : 변수에 저장된 값을 읽어들이는 것

변수 이름에서 참조를 요청하면 변수 이름과 매핑된 메모리 주소를 통해 메모리 공간에 접근해서 저장된 값 반환

**식별자** : 어떤 값을 구별해서 식별할 수 있는 고유한 이름, 식별자는 값이 아니라 메모리 주소를 기억한다.
변수, 함수, 클래스 등의 이름은 모두 식별자다.

## 변수 선언

**변수 선언** : 값을 저장하기 위한 메모리 공간을 확보하고 변수 이름과 확보된 메모리 공간의 주소를 연결해서 값을 저장할 수 있게 준비하는 것. 확보된 메모리 공간은 해제되기 전까지 메모리 공간을 사용할 수 없도록 보호된다. **var, let, const**가 있다.

```js
// 04-04
var score;
```

위 선언문은 변수 이름을 등록하고 값을 저장할 메모리 공간을 확보한다. 확보된 메모리 공간에는 `undefined`라는 값이 암묵적으로 할당되어 초기화된다. 확보된 메모리 공간의 이전의 쓰레기 값을 사용하는 것을 방지한다.

1. 선언 단계를 통해 변수 이름 `score` 등록
2. 초기화 단계를 통해 `score` 변수에 암무적으로 `undefined`를 할당해 초기화

선언하지 않은 식별자에 접근하면 `ReferenceError` 발생

## 변수 선언의 실행 시점

```js
// 04-05
console.log(score); // undefined
var score;
```

변수 선언이 코드가 한 줄씩 실행되는 시점인 런타임이 아니라 그 전에 소스 코드의 평가과정에서 **모든 선언**문을 소스코드에서 찾아내서 먼저 실행하기 때문에 `ReferenceError`가 발생하는 것이 아니라 `undefined`가 출력된다.

이렇게 변수 선언문이 코드의 선두로 끌어 올려진 것처럼 동작하는 자바스크립트 고유 특징을 **변수 호이스팅(variable hoisting)** 이라 한다.

## 값의 할당

변수에 값 할당시에 할당 연산자 `=`를 사용한다. 우변의 값을 좌변 변수에 할당한다.

```js
// 04-06
var score;
score = 80;
```

```js
// 04-07
var score = 80;
```

변수 선언은 런타임 이전에 먼저 실행되지만 값의 할당은 런타임에 실행된다.

```js
// 04-08
console.log(score); // undefined
var score;
score = 80;
console.log(score); // 80
```

```js
// 04-09
console.log(score); // undefined
var score = 80;
console.log(score); // 80
```

변수에 값을 할당할 때는 이전 값 `undefined`가 저장되어 있던 메모리 공간을 지우고 그 메모리 공간에 할당 값을 새롭게 저장하는 것이 아니라 새로운 메모리 공간을 확보하고 그곳에 할당 값 80을 저장한다.

```js
// 04-10
console.log(score); // undefined
score = 80;
var score;
console.log(score); // 80
```

## 값의 재할당

**재할당** : 이미 값이 저장되어 있는 변수에 새로운 값을 또 다시 할당하는 것

`var` 키워드로 선언한 변수는 값을 재할당할 수 없다. 변수에 처음으로 값을 할당하는 것도 엄밀히는 재할당이다. 재할당 할 수 없는 것은 **상수**라 하는데 상수는 한 번만 할당 가능하다.

```js
// 04-11
var score = 80;
score = 90;
```

변수의 값을 재할당하면 `score` 변수의 값은 이전 값 80에서 재할당한 값 90으로 변경된다. 새로운 메모리 공간을 확보하고 그 메모리 공간에 숫자 값 90을 저장한다.

`undefined`, 80과 같은 불필요한 값들은 가비지 콜렉터에 의해 메모리에서 자동 해제된다.
