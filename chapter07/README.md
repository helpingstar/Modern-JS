# Chapter07 연산자

* 연산자 : 하나 이상의 표현식을 대상으로 산술, 할당, 비교, 논리, 타입, 지수 연산 등을 수행해 하나의 값을 만든다.
* 피연산자 : 연산의 대상, 값으로 평가될 수 있는 표현식이어야 한다.

## 산술 연산자

피연산자를 대상으로 수학적 계산을 수행해 새로운 숫자 값을 만든다. 산술 연산이 불가능한 경우 `NaN`을 반환한다.

### 이항 산술 연산자

피연산자의 값을 변경하는 부수 효과가 없다.

| 이항 산술 연산자 | 의미 | 부수효과 |
| - | - | - |
| `+` | 덧셈 |✖|
| `-` | 뺄셈 |✖|
| `*` | 곱셈 |✖|
| `/` | 나눗셈 |✖|
| `%` | 나머지 |✖|

### 단항 산술 연산자

1개의 피연산자를 산술 연산하여 숫자 값을 만든다

| 단항 산술 연산자 | 의미 | 부수효과 |
| - | - | - |
| `++` | 증가 |○|
| `--` | 감소 |○|
| `+` | 어떠한 효과도 없음. 음수를 양수로 반전하지도 않는다. |✖|
| `-` | 양수를 음수로, 음수를 양수로 반전한 값을 반환한다. |✖|

증가(`++`), 감소(`--`) 연산자는 피연사자의 값을 변경하는 부수 효과가 있다.

* 피연산자 앞에 위치한 전위 증가/감소 연산자는 먼저 피연산자의 값을 증가/감소시킨 후, 다른 연산을 수행한다.
* 피연산자 뒤에 위치한 후위 증가/감소 연산자는 먼저 다른 연산을 수행한 후 피연산자의 값을 증가/감소시킨다.

숫자 타입이 아닌 피연산자에 `+` 단항 연산자를 사용하면 피연산자를 숫자 타입으로 변환하여 반환한다. 이때 피연산자를 변경하는 것은 아니다.

```js
// 07-06
var x = '1';

console.log(typeof x); // string
console.log(typeof +x); // number

x = true;
console.log(typeof x); // boolean
console.log(typeof +x); // number

x = 'Hello';
console.log(typeof x); // string
console.log(typeof +x); // number
console.log(+x); // NaN

x = undefined;
console.log(typeof x); // undefined
```

`-` 단항 연산자는 피연산자의 부호를 반전한 값을 반환한다.


```js
// 07-07-01

console.log(-'10'); // -10
console.log(-true); // -1
console.log(-'Hello'); // NaN
```

### 문자열 연결 연산자

`+` 연산자는 피연산자 중 하나 이상이 문자열인 경우 문자열 연결 연산자로 동작한다.

```js
// 07-08

// 문자열 연결 연산자
console.log('1' + 2); // 12
console.log(1 + '2'); // 12

// true는 1로 타입이 변환된다.
console.log(true + 1); // 2

// false는 0으로 타입이 변환된다.
console.log(false + 1); // 1

// null은 0으로 타입이 변환된다.
console.log(null + 1); // 1

// undefined는 숫자로 타입이 변환되지 않는다.
console.log(undefined + 1); // NaN
```

## 할당 연산자

우항에 있는 피연산자의 평가 결과를 좌항에 있는 변수에 할당한다.

| 할당 연산자 | 예 | 동일표현 | 부수 효과 |
| - | - | - | - |
| `=` | `x = 5` | `x = 5`| ○ |
| `+=` | `x += 5` | `x = x + 5`| ○ |
| `-=` | `x -= 5` | `x = x - 5`| ○ |
| `*=` | `x *= 5` | `x = x * 5`| ○ |
| `/=` | `x /= 5` | `x = x / 5`| ○ |
| `%=` | `x %= 5` | `x = x % 5`| ○ |

할당문은 값으로 평가되는 표현식인 문으로써 할당된 값으로 평가된다. 이러한 특징을 이용해 여러 변수에 동일한 값을 연쇄 할당할 수 있다.

```js
// 07-10
var x;

// 할당문은 표현식인 문이다.
console.log(x = 10); // 10
```

```js
// 07-11
var a, b, c;

// 연쇄 할당. 오른쪽에서 왼쪽으로 진행
// 1. c = 0 : 0으로 평가된다.
// 2. b = 0 : 0으로 평가된다.
// 3. a = 0 : 0으로 평가된다.
a = b = c = 0;

console.log(a, b, c); // 0 0 0
```

## 비교 연산자

좌항과 우항의 피연산자를 비교한 다음 그 결과를 불리언 값으로 반환한다.

### 동등/일치 비교 연산자

좌항과 우항의 피연산자가 같은 값으로 평가되는 지 비교해 불리언 값을 반환한다.

* 동등 비교 연산자 : 느슨한 비교
* 일치 비교 연산자 : 엄격한 비교

| 비교 연산자 | 의미 | 사례 | 설명 | 부수 효과 |
| - | - | - | - | - |
| `==` / `!=` | 동등/부동등 비교 | `x == y` / ` x != y` | x와 y의 값이 같음 / 다름 | ✖ |
| `===` / `!==` | 일치/불일치 비교 | `x != y` / ` x !== y` | x와 y의 값과 타입이 같음/다름 | ✖ |

동등 비교(`==`) 연산자는 암묵적 타입 변환을 통해 타입을 일치시킨 후 같은 값인지 비교한다.

```js
// 07-12

// 동등 비교
5 == 5; // true

// 타입은 다르지만 암묵적 타입 변환을 통해 타입을 일치시키면 동등하다.
5 == '5'; // true
```

```js
// 07-13

// 동등 비교. 결과를 예측하기 어렵다.
'0' == ''   // false
0 == ''     // true
'0' == 0    // true
false == 'false'    // false
false == '0'        // true
false == null       // false
false == undefined  // false
```

동등 비교(`==`) 연산자는 예측하기 어려운 결과를 만들어낸다. 따라서 동등 비교 연산자는 사용하지 않는 편이 좋다. 대신 일치 비교(`===`) 연산자를 사용한다.

일치 비교 연산자는 암묵적 타입 변환을 하지 않고 값을 비교한다

```js
// 07-14

// 일치 비교
5 === 5    // true

// 암묵적 타입 변환을 하지 않고 값을 비교한다.
// 즉, 값과 타입이 모두 같은 경우만 true를 반환한다.
5 === '5'  // false
```

`NaN`은 자신과 일치하지 않는 유일한 값이다. 따라서 숫자가 `NaN`인지 조사하려면 빌트인 함수 `Number.isNaN`을 사용한다.

```js
// 07-15

// NaN은 자신과 일치하지 않는 유일한 값이다.
NaN === NaN; // false
```

```js
// 07-16

// Number.isNaN 함수는 지정한 값이 NaN인지 확인하여 그 결과를 불리언 값으로 반환한다
Number.isNaN(NaN); // true
Number.isNaN(10); // false
Number.isNaN(1 + undefined); // true
```

양의 0과 음의 0은 비교시 모두 `true`를 반환한다.

`Object.is` 메서드는 예측 가능한 정확한 비교 결과를 반환한다. 그 외에는 일치 비교 연산자(`===`)와 동일하게 동작한다.

```js
// 07-18

-0 === +0; // true
Object.is(-0, +0); // false

NaN === NaN; // false
Object.is(NaN, NaN); // true
```

### 대소 관계 비교 연산자

| 대소 관계 비교 연산자 | 예제 | 설명 | 부수 효과 |
| - | - | - | - |
| `>` / `<` | `x > y` / `x < y` | `x`가 `y`보다 크/작다 | ✖ |
| `>=` / `<=` | `x >= y` / `x <= y` | `x`가 `y`보다 크/작거나 같다 | ✖ |

## 삼항 조건 연산자

조건식의 평가 결과에 따라 반환할 값을 결정한다. 부수효과는 없다

```
(조건식) ? (조건식이 true일때 반환할 값) : (조건식이 false일 때 반환할 값)
```

```js
// 07-21-01

var x = 2, result;

var result = x % 2 ? '홀수' : '짝수';
console.log(result); // 짝수

if (x % 2) result = '홀수';
else       result = '짝수';
console.log(result); // 짝수
```

위와 같이 `if...else` 문을 사용해서 삼항 조건 연산자 표현식과 유사하게 처리할 수 있다. 하지만 `if...else`문은 삼항 조건 연산자 표현식과 달리 값처럼 사용할 수 없다.

## 논리 연산자

우항과 좌항의 피연산자를 논리 연산한다.

| 논리 연산자 | 의미 | 부수 효과 |
| - | - | - |
| <code>&#124;&#124;</code> | 논리합(OR) | ✖ |
| `&&` | 논리곱(AND) | ✖ |
| `!` | 부정(NOT) | ✖ |

피연산자가 불리언 값이 아니면 불리언 타입으로 암묵적 타입 변환된다.

```js
// 07-26
!0;       // true
!'Hello'  // false
```

논리합(`||`) 또는 논리곱(`&&`) 연산자 표현식은 언제나 2개의 피연산자 중 어느 한 쪽으로 평가된다.

```js
// 07-27

// 단축 평가
'Cat' && 'Dog' // 'Dog'
```

## 쉼표 연산자

왼쪽 피연산자부터 차례대로 피연산자를 평가하고 마지막 피연산자의 평가가 끝나면 마지막 피연산자의 평가 결과를 반환한다.

```js
// 07-29

var x, y, z;
var result;
result = (x = 1, y = 2, z = 3);

console.log(result); // 3
```

## 그룹 연산자

소괄호 (`()`)로 피연산자를 감싸는 그룹 연산자는 자신의 피연산자인 표현식을 가장 먼저 평가한다.

```js
// 07-30

10 * 2 + 3; // 23

// 그룹 연산자를 사용하여 우선순위를 조절
10 * (2 + 3); // 50
```

## `typeof` 연산자

피연산자의 데이터 타입을 문자열로 반환한다.

```js
// 07-31

typeof '';              // 'string'
typeof 1;               // 'number'
typeof NaN;             // 'number'
typeof true;            // 'boolean'
typeof undefined;       // 'undefined'
typeof Symbol();        // 'symbol'
typeof null;            // 'object'
typeof [];              // 'object'
typeof {};              // 'object'
typeof new Date();      // 'object'
typeof /test/gi;        // 'object'
typeof function () {};  // 'function'
```

`typeof`로 `null` 값을 연산하면 `object`를 반환한다. 이 버그는 기존 코드에 영향을 줄 수 있기 때문에 수정되지 못하고 있다.

`null`을 확인할 때는 일치 연산자(`===`)를 사용하자.

선언하지 않은 식별자를 `typeof` 연산자로 연산해보면 `ReferenceError`가 발생하지 않고 `undefined`를 반환한다.

## 지수 연산자

좌항의 피연산자를 밑(base)으로, 우항의 피연산자를 지수(exponent)로 거듭 제곱하여 숫자 값을 반환한다. 이항 연산자 중에서 우선순위가 가장 높다.

```js
// 07-34-01

2 ** 2;     // 4
2 ** 2.5;   // 5.65685424949238
2 ** 0;     // 1
2 ** -2;    // 0.25

2 ** (3 ** 2);  // 512

// 음수를 거듭제곱의 밑으로 사용해 계산하려면 괄호로 묶어야 한다.
// -5 ** 2;    // SyntaxError: ...
(-5) ** 2;  // 25
```

## 연산자 우선순위

[연산자 우선순위/결합순서 문서](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/Operator_precedence)

우선 순위가 가장 높은 그룹 연산자를 사용하여 우선순위를 명시적으로 조절하는 것을 권장한다.